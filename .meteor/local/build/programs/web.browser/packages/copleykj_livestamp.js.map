{"version":3,"sources":["meteor://ðŸ’»app/packages/copleykj_livestamp/packages/copleykj_livestamp.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2E","file":"/packages/copleykj_livestamp.js","sourcesContent":["(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/copleykj:livestamp/lib/livestamp/livestamp.js                                                             //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// Livestamp.js / v1.1.2 / (c) 2012 Matt Bradley / MIT License                                                        // 1\n(function($, moment) {                                                                                                // 2\n  var updateInterval = 1e3,                                                                                           // 3\n      paused = false,                                                                                                 // 4\n      $livestamps = $([]),                                                                                            // 5\n                                                                                                                      // 6\n  init = function() {                                                                                                 // 7\n    livestampGlobal.resume();                                                                                         // 8\n  },                                                                                                                  // 9\n                                                                                                                      // 10\n  prep = function($el, timestamp) {                                                                                   // 11\n    var oldData = $el.data('livestampdata');                                                                          // 12\n    if (typeof timestamp == 'number')                                                                                 // 13\n      timestamp *= 1e3;                                                                                               // 14\n                                                                                                                      // 15\n    $el.removeAttr('data-livestamp')                                                                                  // 16\n      .removeData('livestamp');                                                                                       // 17\n                                                                                                                      // 18\n    timestamp = moment(timestamp);                                                                                    // 19\n    if (moment.isMoment(timestamp) && !isNaN(+timestamp)) {                                                           // 20\n      var newData = $.extend({ }, { 'original': $el.contents() }, oldData);                                           // 21\n      newData.moment = moment(timestamp);                                                                             // 22\n                                                                                                                      // 23\n      $el.data('livestampdata', newData).empty();                                                                     // 24\n      $livestamps.push($el[0]);                                                                                       // 25\n    }                                                                                                                 // 26\n  },                                                                                                                  // 27\n                                                                                                                      // 28\n  run = function() {                                                                                                  // 29\n    if (paused) return;                                                                                               // 30\n    livestampGlobal.update();                                                                                         // 31\n    setTimeout(run, updateInterval);                                                                                  // 32\n  },                                                                                                                  // 33\n                                                                                                                      // 34\n  livestampGlobal = {                                                                                                 // 35\n    update: function() {                                                                                              // 36\n      $('[data-livestamp]').each(function() {                                                                         // 37\n        var $this = $(this);                                                                                          // 38\n        prep($this, $this.data('livestamp'));                                                                         // 39\n      });                                                                                                             // 40\n                                                                                                                      // 41\n      var toRemove = [];                                                                                              // 42\n      $livestamps.each(function() {                                                                                   // 43\n        var $this = $(this),                                                                                          // 44\n            data = $this.data('livestampdata');                                                                       // 45\n                                                                                                                      // 46\n        if (data === undefined)                                                                                       // 47\n          toRemove.push(this);                                                                                        // 48\n        else if (moment.isMoment(data.moment)) {                                                                      // 49\n          var from = $this.html(),                                                                                    // 50\n              to = data.moment.fromNow();                                                                             // 51\n                                                                                                                      // 52\n          if (from != to) {                                                                                           // 53\n            var e = $.Event('change.livestamp');                                                                      // 54\n            $this.trigger(e, [from, to]);                                                                             // 55\n            if (!e.isDefaultPrevented())                                                                              // 56\n              $this.html(to);                                                                                         // 57\n          }                                                                                                           // 58\n        }                                                                                                             // 59\n      });                                                                                                             // 60\n                                                                                                                      // 61\n      $livestamps = $livestamps.not(toRemove);                                                                        // 62\n    },                                                                                                                // 63\n                                                                                                                      // 64\n    pause: function() {                                                                                               // 65\n      paused = true;                                                                                                  // 66\n    },                                                                                                                // 67\n                                                                                                                      // 68\n    resume: function() {                                                                                              // 69\n      paused = false;                                                                                                 // 70\n      run();                                                                                                          // 71\n    },                                                                                                                // 72\n                                                                                                                      // 73\n    interval: function(interval) {                                                                                    // 74\n      if (interval === undefined)                                                                                     // 75\n        return updateInterval;                                                                                        // 76\n      updateInterval = interval;                                                                                      // 77\n    }                                                                                                                 // 78\n  },                                                                                                                  // 79\n                                                                                                                      // 80\n  livestampLocal = {                                                                                                  // 81\n    add: function($el, timestamp) {                                                                                   // 82\n      if (typeof timestamp == 'number')                                                                               // 83\n        timestamp *= 1e3;                                                                                             // 84\n      timestamp = moment(timestamp);                                                                                  // 85\n                                                                                                                      // 86\n      if (moment.isMoment(timestamp) && !isNaN(+timestamp)) {                                                         // 87\n        $el.each(function() {                                                                                         // 88\n          prep($(this), timestamp);                                                                                   // 89\n        });                                                                                                           // 90\n        livestampGlobal.update();                                                                                     // 91\n      }                                                                                                               // 92\n                                                                                                                      // 93\n      return $el;                                                                                                     // 94\n    },                                                                                                                // 95\n                                                                                                                      // 96\n    destroy: function($el) {                                                                                          // 97\n      $livestamps = $livestamps.not($el);                                                                             // 98\n      $el.each(function() {                                                                                           // 99\n        var $this = $(this),                                                                                          // 100\n            data = $this.data('livestampdata');                                                                       // 101\n                                                                                                                      // 102\n        if (data === undefined)                                                                                       // 103\n          return $el;                                                                                                 // 104\n                                                                                                                      // 105\n        $this                                                                                                         // 106\n          .html(data.original ? data.original : '')                                                                   // 107\n          .removeData('livestampdata');                                                                               // 108\n      });                                                                                                             // 109\n                                                                                                                      // 110\n      return $el;                                                                                                     // 111\n    },                                                                                                                // 112\n                                                                                                                      // 113\n    isLivestamp: function($el) {                                                                                      // 114\n      return $el.data('livestampdata') !== undefined;                                                                 // 115\n    }                                                                                                                 // 116\n  };                                                                                                                  // 117\n                                                                                                                      // 118\n  $.livestamp = livestampGlobal;                                                                                      // 119\n  $(init);                                                                                                            // 120\n  $.fn.livestamp = function(method, options) {                                                                        // 121\n    if (!livestampLocal[method]) {                                                                                    // 122\n      options = method;                                                                                               // 123\n      method = 'add';                                                                                                 // 124\n    }                                                                                                                 // 125\n                                                                                                                      // 126\n    return livestampLocal[method](this, options);                                                                     // 127\n  };                                                                                                                  // 128\n})(jQuery, moment);                                                                                                   // 129\n                                                                                                                      // 130\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/copleykj:livestamp/export-livestamp.js                                                                    //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// This file exposes livestamp so that it works with Meteor's package system after v0.6.5                             // 1\nif (typeof Package !== \"undefined\") {                                                                                 // 2\n  livestamp = this.livestamp;                                                                                         // 3\n}                                                                                                                     // 4\n                                                                                                                      // 5\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/copleykj:livestamp/helpers.js                                                                             //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nvar Template = Package.templating.Template;                                                                           // 1\n                                                                                                                      // 2\nTemplate.registerHelper('livestamp', function(date) {                                                                 // 3\n  var time = moment(date);                                                                                            // 4\n                                                                                                                      // 5\n  // Fallback to current time if `date` is invalid.                                                                   // 6\n  if(!time.isValid()) {                                                                                               // 7\n    time = moment();                                                                                                  // 8\n  }                                                                                                                   // 9\n                                                                                                                      // 10\n  var timestamp = time.toISOString(),                                                                                 // 11\n      timestring = time.fromNow();                                                                                    // 12\n                                                                                                                      // 13\n  return new Spacebars.SafeString('<span class=\"livestamp\" data-livestamp=\"'+ timestamp  +'\">'+timestring+'</span>'); // 14\n});                                                                                                                   // 15\n                                                                                                                      // 16\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}