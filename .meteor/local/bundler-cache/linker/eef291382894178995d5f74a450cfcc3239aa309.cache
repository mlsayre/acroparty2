[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nECMAScript = Package.ecmascript.ECMAScript;\nAccounts = Package['accounts-base'].Accounts;\nReactMeteorData = Package['react-meteor-data'].ReactMeteorData;\nmoment = Package['momentjs:moment'].moment;\nlivestamp = Package['copleykj:livestamp'].livestamp;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nmain = Package.webapp.main;\nWebAppInternals = Package.webapp.WebAppInternals;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"imports\":{\"api\":{\"chats.js\":[\"meteor/mongo\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// imports/api/chats.js                                                                           //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nmodule.export({Chats:function(){return Chats}});var Mongo;module.import('meteor/mongo',{\"Mongo\":function(v){Mongo=v}});\n                                                                                                  //\nvar Chats = new Mongo.Collection('chats');                                                        // 3\n                                                                                                  //\nif (Meteor.isServer) {                                                                            // 5\n  Meteor.publish('chats', function tasksPublication() {                                           // 6\n    return Chats.find();                                                                          // 7\n  });                                                                                             // 8\n}                                                                                                 // 9\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"gamedata.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",\"../api/rooms.js\",\"../api/games.js\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// imports/api/gamedata.js                                                                        //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nmodule.export({Gamedata:function(){return Gamedata}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var Mongo;module.import('meteor/mongo',{\"Mongo\":function(v){Mongo=v}});var check;module.import('meteor/check',{\"check\":function(v){check=v}});var Rooms;module.import('../api/rooms.js',{\"Rooms\":function(v){Rooms=v}});var Games;module.import('../api/games.js',{\"Games\":function(v){Games=v}});\n                                                                                                  // 2\n                                                                                                  // 3\n                                                                                                  //\n                                                                                                  // 5\n                                                                                                  // 6\nvar Gamedata = new Mongo.Collection('gamedata');                                                  // 7\n                                                                                                  //\nif (Meteor.isServer) {                                                                            // 9\n  Meteor.publish('gamedata', function tasksPublication() {                                        // 10\n    return Gamedata.find();                                                                       // 11\n  });                                                                                             // 12\n}                                                                                                 // 13\n                                                                                                  //\nMeteor.methods({                                                                                  // 15\n  'gamedata.postAnswer': function gamedataPostAnswer(roomId, userId, answer) {                    // 16\n    var submitAnswerTime = new Date();                                                            // 17\n    Gamedata.update({ room_id: roomId, user_id: userId }, {                                       // 18\n      $set: { answer: answer,                                                                     // 19\n        submitAnswerTime: submitAnswerTime }                                                      // 20\n    });                                                                                           // 18\n    var countStarted = Games.findOne({ room_id: roomId }).playStartTime;                          // 22\n    var finalSubmitTime = (submitAnswerTime - countStarted) / 1000;                               // 23\n    Gamedata.update({ room_id: roomId, user_id: userId }, {                                       // 24\n      $set: { finalAnswerTime: finalSubmitTime }                                                  // 25\n    });                                                                                           // 24\n  }                                                                                               // 27\n});                                                                                               // 15\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"games.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",\"react-dom\",\"../api/rooms.js\",\"../api/gamedata.js\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// imports/api/games.js                                                                           //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nmodule.export({Games:function(){return Games}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var Mongo;module.import('meteor/mongo',{\"Mongo\":function(v){Mongo=v}});var check;module.import('meteor/check',{\"check\":function(v){check=v}});var ReactDOM;module.import('react-dom',{\"default\":function(v){ReactDOM=v}});var Rooms;module.import('../api/rooms.js',{\"Rooms\":function(v){Rooms=v}});var Gamedata;module.import('../api/gamedata.js',{\"Gamedata\":function(v){Gamedata=v}});\n                                                                                                  // 2\n                                                                                                  // 3\n                                                                                                  // 4\n                                                                                                  //\n                                                                                                  // 6\n                                                                                                  // 7\nvar Games = new Mongo.Collection('games');                                                        // 8\n                                                                                                  //\nif (Meteor.isServer) {                                                                            // 10\n  Meteor.publish('games', function tasksPublication() {                                           // 11\n    return Games.find();                                                                          // 12\n  });                                                                                             // 13\n}                                                                                                 // 14\n                                                                                                  //\n// game config                                                                                    //\nacroLettersPool = \"AAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEFFFFFFFFFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIIIIIIJJJJJKKKKKKLLLLLLLLLLLLLLLLLLLLLLLLMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPPPPPPPPPPQQQQRRRRRRRRRRRRRRRRRRSSSSSSSSSSSSSSSSSSSSSSSSTTTTTTTTTTTTTTTTTTTTTTTTUUUUUUUVVVVVVVVVVVVWWWWWWWWWWWWXYYYYYYYYYYYYZZZZ\";\n                                                                                                  //\nacroCategories = [\"General\", \"Sports\", \"Food\", \"Movies\", \"Television\", \"History\", \"Music\", \"Art\", \"Animals\", \"Science\", \"Politics\", \"Fashion\", \"Books\", \"Travel\", \"Celebrities\", \"Romance\", \"Technology\", \"Family\", \"School\", \"Nature\", \"Health\", \"Current Events\", \"Work\", \"Give Some Advice\", \"Definitions\", \"Sayings\", \"Exercise/Fitness\", \"Baby's First Sentence\", \"My Greatest Fear\", \"In the Year 3000\", \"Weird Laws\", \"I Was Late Because...\", \"Odd College Majors\", \"My Biggest Secret\", \"New Ice Cream Flavors\", \"Bad Restaurant Names\", \"I Got Fired Because...\", \"Odd Product Slogans\", \"Bad Habits\", \"Science Fiction\", \"Strange Trends\", \"Embarrassing Moments\", \"CAVEMAN SAY...\", \"Superhero/villain Names\", \"Horror Movie Titles\", \"In a Perfect World...\", \"Short Poetry\", \"New Year's Resolutions\", \"My Dream Last Night\", \"Odd Tombstone Messages\", \"Awful First Dates\", \"Odd Holiday Customs\", \"The Holidays\", \"Short Ghost Stories\", \"... Said No One Ever\", \"Fairy/Folk Tales\"];\n                                                                                                  //\nroundsToPlay = 8;                                                                                 // 31\nroundTimes = [9, 9, 9, 9, 9, 9, 9, 9]; // [50, 60, 60, 80, 50, 60, 60 ,80]                        // 32\nroundAcroLength = [3, 4, 5, 6, 3, 4, 5, 6];                                                       // 33\nvar readyTimerStatus = \"init\";                                                                    // 34\nvar playTimerStatus = \"init\";                                                                     // 35\nvar voteTimerStatus = \"init\";                                                                     // 36\nvar resultsTimerStatus = \"init\";                                                                  // 37\nvar finalTimerStatus = \"init\";                                                                    // 38\n                                                                                                  //\n////////////                                                                                      //\n                                                                                                  //\nMeteor.methods({                                                                                  // 42\n  'games.init': function gamesInit(roomId) {                                                      // 43\n    if (Games.find({ room_id: roomId }).fetch().length === 0) {                                   // 44\n      //always make sure updates only happen once                                                 //\n      readyTimer = {};                                                                            // 45\n      playTimer = {};                                                                             // 46\n      playStartTimer = {};                                                                        // 47\n      voteTimer = {};                                                                             // 48\n      resultsTimer = {};                                                                          // 49\n      finalTimer = {};                                                                            // 50\n      var roundletters;                                                                           // 51\n      var acroPoolLength = acroLettersPool.length;                                                // 52\n      var catPoolLength = acroCategories.length;                                                  // 53\n      var acroPlayArray = [];                                                                     // 54\n      var acroCatArray = [];                                                                      // 55\n      for (var i = 0; i < roundsToPlay; i++) {                                                    // 56\n        var acroToPlay = \"\";                                                                      // 57\n        for (var j = 0; j < roundAcroLength[i]; j++) {                                            // 58\n          acroToPlay = acroToPlay + acroLettersPool[Math.floor(Math.random() * acroPoolLength)];  // 59\n        }                                                                                         // 60\n        acroPlayArray.push(acroToPlay);                                                           // 61\n        acroCatArray.push(acroCategories[Math.floor(Math.random() * catPoolLength)]);             // 62\n      }                                                                                           // 63\n      Games.insert({                                                                              // 64\n        room_id: roomId,                                                                          // 65\n        roundletters: acroPlayArray,                                                              // 66\n        roundcategories: acroCatArray,                                                            // 67\n        roundtimes: roundTimes                                                                    // 68\n      });                                                                                         // 64\n      Rooms.update({ room_id: roomId }, {                                                         // 70\n        $set: { round: 1, subround: \"Get ready\" }                                                 // 71\n      });                                                                                         // 70\n    }                                                                                             // 73\n  },                                                                                              // 74\n  'games.getready': function gamesGetready(roomId) {                                              // 76\n    if (readyTimerStatus !== \"Ready running\") {                                                   // 77\n      // one timer only                                                                           //\n      readyTimerStatus = \"Ready running\";                                                         // 78\n      Meteor.setTimeout(function () {                                                             // 79\n        if (Gamedata.find({ room_id: roomId }).fetch().length === 0) {                            // 80\n          Meteor.call('games.reset', roomId);                                                     // 81\n        } else {                                                                                  // 82\n          Rooms.update({ room_id: roomId }, {                                                     // 83\n            $set: { subround: \"Play\" }                                                            // 84\n          });                                                                                     // 83\n        }                                                                                         // 86\n        readyTimerStatus = \"Ready complete\";                                                      // 87\n      }, 3500);                                                                                   // 88\n    }                                                                                             // 89\n  },                                                                                              // 90\n  'games.play': function gamesPlay(roomId, roundtime) {                                           // 92\n    if (playTimerStatus !== \"Play running\") {                                                     // 93\n      // one timer only                                                                           //\n      playTimerStatus = \"Play running\";                                                           // 94\n      Games.update({ room_id: roomId }, {                                                         // 95\n        $set: { turnLetters: true }                                                               // 96\n      });                                                                                         // 95\n      var numberOfLetters = roundAcroLength[Rooms.findOne({ room_id: roomId }).round - 1];        // 98\n      playTimer[roomId] = Meteor.setTimeout(function () {                                         // 99\n        if (Gamedata.find({ room_id: roomId }).fetch().length === 0) {                            // 100\n          Meteor.call('games.reset', roomId);                                                     // 101\n        } else {                                                                                  // 102\n          Rooms.update({ room_id: roomId }, {                                                     // 103\n            $set: { subround: \"Vote\" }                                                            // 104\n          });                                                                                     // 103\n        }                                                                                         // 106\n        playTimerStatus = \"Play complete\";                                                        // 107\n        Games.update({ room_id: roomId }, {                                                       // 108\n          $set: { playStartAnswering: false }                                                     // 109\n        });                                                                                       // 108\n      }, roundtime * 1000 + numberOfLetters * 1000 + 5000);                                       // 111\n      Meteor.setTimeout(function () {                                                             // 112\n        Games.update({ room_id: roomId }, {                                                       // 113\n          $set: { playStartAnswering: true,                                                       // 114\n            timerSeconds: roundtime }                                                             // 115\n        });                                                                                       // 113\n        timer(roundtime, roomId, \"playtimerstate\");                                               // 117\n      }, numberOfLetters * 1000 + 2000);                                                          // 118\n                                                                                                  //\n      Meteor.setTimeout(function () {                                                             // 121\n        Meteor.call('games.letterFlipFlagOff', roomId);                                           // 122\n      }, numberOfLetters * 1000 + 600);                                                           // 123\n    }                                                                                             // 124\n  },                                                                                              // 125\n  'games.vote': function gamesVote(roomId) {                                                      // 127\n    if (voteTimerStatus !== \"Vote running\") {                                                     // 128\n      // one timer only                                                                           //\n      voteTimerStatus = \"Vote running\";                                                           // 129\n      Meteor.setTimeout(function () {                                                             // 130\n        if (Gamedata.find({ room_id: roomId }).fetch().length === 0) {                            // 131\n          Meteor.call('games.reset', roomId);                                                     // 132\n        } else {                                                                                  // 133\n          Rooms.update({ room_id: roomId }, {                                                     // 134\n            $set: { subround: \"Results\" }                                                         // 135\n          });                                                                                     // 134\n        }                                                                                         // 137\n        voteTimerStatus = \"Vote complete\";                                                        // 138\n      }, 4000); //35000                                                                           // 139\n    }                                                                                             // 140\n  },                                                                                              // 141\n  'games.results': function gamesResults(roomId) {                                                // 143\n    if (resultsTimerStatus !== \"Results running\") {                                               // 144\n      // one timer only                                                                           //\n      resultsTimerStatus = \"Results running\";                                                     // 145\n      var currentRound = Rooms.findOne({ room_id: roomId }).round;                                // 146\n      if (currentRound === roundsToPlay) {                                                        // 147\n        Meteor.setTimeout(function () {                                                           // 148\n          if (Gamedata.find({ room_id: roomId }).fetch().length < 2) {                            // 149\n            // end game after results if not enough players                                       //\n            resultsTimerStatus = \"Results complete\";                                              // 150\n            Meteor.call('games.reset', roomId);                                                   // 151\n          } else {                                                                                // 152\n            Rooms.update({ room_id: roomId }, {                                                   // 153\n              $set: { subround: \"Final results\" }                                                 // 154\n            });                                                                                   // 153\n          }                                                                                       // 156\n          resultsTimerStatus = \"Results complete\";                                                // 157\n        }, 3000); //22000                                                                         // 158\n      } else {                                                                                    // 159\n          Meteor.setTimeout(function () {                                                         // 160\n            if (Gamedata.find({ room_id: roomId }).fetch().length < 2) {                          // 161\n              // end game after results if not enough players                                     //\n              resultsTimerStatus = \"Results complete\";                                            // 162\n              Meteor.call('games.reset', roomId);                                                 // 163\n            } else {                                                                              // 164\n              Rooms.update({ room_id: roomId }, {                                                 // 165\n                $set: { round: currentRound + 1,                                                  // 166\n                  subround: \"Get ready\" }                                                         // 167\n              });                                                                                 // 165\n            }                                                                                     // 169\n            resultsTimerStatus = \"Results complete\";                                              // 170\n          }, 3000); //22000                                                                       // 171\n        }                                                                                         // 172\n    }                                                                                             // 173\n  },                                                                                              // 174\n  'games.finalresults': function gamesFinalresults(roomId) {                                      // 176\n    if (finalTimerStatus !== \"Final running\") {                                                   // 177\n      // one timer only                                                                           //\n      finalTimerStatus = \"Final running\";                                                         // 178\n      Meteor.setTimeout(function () {                                                             // 179\n        if (Gamedata.find({ room_id: roomId }).fetch().length < 2) {                              // 180\n          // end game after results if not enough players                                         //\n          finalTimerStatus = \"Final complete\";                                                    // 181\n          Meteor.call('games.reset', roomId);                                                     // 182\n        } else {                                                                                  // 183\n          // set up for new game                                                                  //\n          Games.remove({ room_id: roomId });                                                      // 184\n          Meteor.call('games.init', roomId);                                                      // 185\n        }                                                                                         // 186\n        finalTimerStatus = \"Final complete\";                                                      // 187\n      }, 25000);                                                                                  // 188\n    }                                                                                             // 189\n    readyTimerStatus = \"init\";                                                                    // 190\n    playTimerStatus = \"init\";                                                                     // 191\n    voteTimerStatus = \"init\";                                                                     // 192\n    resultsTimerStatus = \"init\";                                                                  // 193\n    finalTimerStatus = \"init\";                                                                    // 194\n  },                                                                                              // 195\n  'games.reset': function gamesReset(roomId) {                                                    // 197\n    Games.remove({ room_id: roomId });                                                            // 198\n    Gamedata.remove({ room_id: roomId });                                                         // 199\n    Rooms.update({ room_id: roomId }, {                                                           // 200\n      $set: { round: 0,                                                                           // 201\n        subround: \"Waiting for players\" }                                                         // 202\n    });                                                                                           // 200\n    readyTimerStatus = \"init\";                                                                    // 204\n    playTimerStatus = \"init\";                                                                     // 205\n    voteTimerStatus = \"init\";                                                                     // 206\n    resultsTimerStatus = \"init\";                                                                  // 207\n    finalTimerStatus = \"init\";                                                                    // 208\n  },                                                                                              // 209\n  'games.letterFlipFlagOff': function gamesLetterFlipFlagOff(roomId) {                            // 211\n    Games.update({ room_id: roomId }, {                                                           // 212\n      $set: { turnLetters: false }                                                                // 213\n    });                                                                                           // 212\n  }                                                                                               // 215\n});                                                                                               // 42\n                                                                                                  //\nfunction timer(seconds, roomId, statetoactivate) {                                                // 219\n                                                                                                  //\n  Meteor.setTimeout(function () {                                                                 // 221\n    var countdownStartTime = new Date();                                                          // 222\n    if (statetoactivate === \"playtimerstate\") {                                                   // 223\n      Games.update({ room_id: roomId }, {                                                         // 224\n        $set: { playStartTime: countdownStartTime,                                                // 225\n          showAnswerForm: true }                                                                  // 226\n      });                                                                                         // 224\n    } else {                                                                                      // 228\n      Games.update({ room_id: roomId }, {                                                         // 229\n        $set: { voteStartTime: countdownStartTime }                                               // 230\n      });                                                                                         // 229\n    }                                                                                             // 232\n    var count = seconds;                                                                          // 233\n    var counter = Meteor.setInterval(tock, 1000);                                                 // 234\n                                                                                                  //\n    function tock() {                                                                             // 236\n      count = count - 1;                                                                          // 237\n      if (count < 0) {                                                                            // 238\n        Meteor.clearInterval(counter);                                                            // 239\n        Games.update({ room_id: roomId }, {                                                       // 240\n          $set: { showAnswerForm: false }                                                         // 241\n        });                                                                                       // 240\n        return;                                                                                   // 243\n      }                                                                                           // 244\n      Games.update({ room_id: roomId }, {                                                         // 245\n        $set: { timerSeconds: count }                                                             // 246\n      });                                                                                         // 245\n    }                                                                                             // 248\n  }, 2000);                                                                                       // 249\n}                                                                                                 // 250\n                                                                                                  //\n// Games.find({ room_id: roomId }).remove({});                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"messages.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// imports/api/messages.js                                                                        //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nmodule.export({Messages:function(){return Messages}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var Mongo;module.import('meteor/mongo',{\"Mongo\":function(v){Mongo=v}});var check;module.import('meteor/check',{\"check\":function(v){check=v}});\n                                                                                                  // 2\n                                                                                                  // 3\n                                                                                                  //\nvar Messages = new Mongo.Collection('messages');                                                  // 5\n                                                                                                  //\nMeteor.methods({                                                                                  // 7\n  'messages.msgPlayer': function messagesMsgPlayer(roomId, name, verb, roomName, className) {     // 8\n    Messages.insert({                                                                             // 9\n      user_id: \"<PartyHost>\",                                                                     // 10\n      room_id: roomId,                                                                            // 11\n      message: name + verb + roomName,                                                            // 12\n      messageClass: className,                                                                    // 13\n      createdAt: new Date()                                                                       // 14\n    });                                                                                           // 9\n  },                                                                                              // 16\n  'messages.postMessage': function messagesPostMessage(name, roomId, message) {                   // 18\n    Messages.insert({                                                                             // 19\n      user_id: name,                                                                              // 20\n      room_id: roomId,                                                                            // 21\n      message: message,                                                                           // 22\n      createdAt: new Date() });                                                                   // 23\n  },                                                                                              // 24\n  'messages.deleteOld': function messagesDeleteOld(messageId) {                                   // 26\n    Messages.remove({ _id: messageId });                                                          // 27\n  }                                                                                               // 28\n});                                                                                               // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"rooms.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",\"../api/gamedata.js\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// imports/api/rooms.js                                                                           //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nmodule.export({Rooms:function(){return Rooms}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var Mongo;module.import('meteor/mongo',{\"Mongo\":function(v){Mongo=v}});var check;module.import('meteor/check',{\"check\":function(v){check=v}});var Gamedata;module.import('../api/gamedata.js',{\"Gamedata\":function(v){Gamedata=v}});\n                                                                                                  // 2\n                                                                                                  // 3\n                                                                                                  //\nvar Rooms = new Mongo.Collection('rooms');                                                        // 5\n                                                                                                  // 6\n                                                                                                  //\nif (Meteor.isServer) {                                                                            // 8\n  Meteor.publish('rooms', function tasksPublication() {                                           // 9\n    return Rooms.find();                                                                          // 10\n  });                                                                                             // 11\n}                                                                                                 // 12\n                                                                                                  //\nMeteor.methods({                                                                                  // 14\n  'rooms.addPlayer': function roomsAddPlayer(roomId, playerAdding) {                              // 15\n    if (!Gamedata.findOne({ room_id: roomId, user_id: playerAdding })) {                          // 16\n      Gamedata.insert({                                                                           // 17\n        room_id: roomId,                                                                          // 18\n        user_id: playerAdding,                                                                    // 19\n        score: 0                                                                                  // 20\n      });                                                                                         // 17\n    }                                                                                             // 22\n  },                                                                                              // 23\n  'rooms.removePlayer': function roomsRemovePlayer(roomId, playerRemoving) {                      // 25\n    Gamedata.remove({ room_id: roomId, user_id: playerRemoving });                                // 26\n  }                                                                                               // 27\n});                                                                                               // 14\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]}},\"server\":{\"accounts-server-config.js\":[\"meteor/accounts-base\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// server/accounts-server-config.js                                                               //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nvar Accounts;module.import('meteor/accounts-base',{\"Accounts\":function(v){Accounts=v}});          // 1\n                                                                                                  //\nAccounts.onCreateUser(function (options, user) {                                                  // 3\n                                                                                                  //\n  user.currentRoom = \"\";                                                                          // 5\n  user.stats = {                                                                                  // 6\n    lifetimePoints: 0,                                                                            // 7\n    lifetimeWins: 0,                                                                              // 8\n    lifetimeGamesPlayed: 0                                                                        // 9\n  };                                                                                              // 6\n                                                                                                  //\n  if (options.profile) user.profile = options.profile;                                            // 12\n                                                                                                  //\n  return user;                                                                                    // 15\n});                                                                                               // 16\n                                                                                                  //\nMeteor.publish(\"userData\", function () {                                                          // 18\n  if (this.userId) {                                                                              // 19\n    return Meteor.users.find({ _id: this.userId }, { fields: { 'stats': 1, 'currentRoom': 1 } });\n  } else {                                                                                        // 22\n    this.ready();                                                                                 // 23\n  }                                                                                               // 24\n});                                                                                               // 25\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"main.js\":[\"meteor/meteor\",\"../imports/api/rooms.js\",\"../imports/api/chats.js\",\"../imports/api/messages.js\",\"../imports/api/games.js\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// server/main.js                                                                                 //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nvar Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});module.import('../imports/api/rooms.js');module.import('../imports/api/chats.js');module.import('../imports/api/messages.js');module.import('../imports/api/games.js');\n                                                                                                  // 2\n                                                                                                  // 3\n                                                                                                  // 4\n                                                                                                  // 5\n                                                                                                  //\nMeteor.startup(function () {                                                                      // 7\n  // code to run on server at startup                                                             //\n});                                                                                               // 9\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]}},{\"extensions\":[\".js\",\".json\",\".jsx\"]});\nrequire(\"./server/accounts-server-config.js\");\nrequire(\"./server/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/imports/api/chats.js","/imports/api/gamedata.js","/imports/api/games.js","/imports/api/messages.js","/imports/api/rooms.js","/server/accounts-server-config.js","/server/main.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["import { Mongo } from 'meteor/mongo';\n\nexport const Chats = new Mongo.Collection('chats');\n\nif (Meteor.isServer) {\n  Meteor.publish('chats', function tasksPublication() {\n    return Chats.find();\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { check } from 'meteor/check';\n\nimport { Rooms } from '../api/rooms.js';\nimport { Games } from '../api/games.js';\nexport const Gamedata = new Mongo.Collection('gamedata');\n\nif (Meteor.isServer) {\n  Meteor.publish('gamedata', function tasksPublication() {\n    return Gamedata.find();\n  });\n}\n\nMeteor.methods({\n  'gamedata.postAnswer'(roomId, userId, answer) {\n    var submitAnswerTime = new Date();\n    Gamedata.update({room_id: roomId, user_id: userId}, {\n      $set: { answer: answer,\n              submitAnswerTime: submitAnswerTime },\n    });\n    var countStarted = Games.findOne({room_id: roomId}).playStartTime\n    var finalSubmitTime = (submitAnswerTime - countStarted) / 1000;\n    Gamedata.update({room_id: roomId, user_id: userId}, {\n      $set: { finalAnswerTime: finalSubmitTime },\n    });\n  },\n\n  // 'rooms.removePlayer'(roomId, playerRemoving) {\n  //   Rooms.update(roomId, {\n  //     $pull: { players:  playerRemoving\n  //   }}, {multi: true})\n  // }\n\n})\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { check } from 'meteor/check';\nimport ReactDOM from 'react-dom';\n\nimport { Rooms } from '../api/rooms.js';\nimport { Gamedata } from '../api/gamedata.js';\nexport const Games = new Mongo.Collection('games');\n\nif (Meteor.isServer) {\n  Meteor.publish('games', function tasksPublication() {\n    return Games.find();\n  });\n}\n\n// game config\nacroLettersPool = \"AAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEFFFFFFFFFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIIIIIIJJJJJKKKKKKLLLLLLLLLLLLLLLLLLLLLLLLMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPPPPPPPPPPQQQQRRRRRRRRRRRRRRRRRRSSSSSSSSSSSSSSSSSSSSSSSSTTTTTTTTTTTTTTTTTTTTTTTTUUUUUUUVVVVVVVVVVVVWWWWWWWWWWWWXYYYYYYYYYYYYZZZZ\";\n\nacroCategories = [\"General\", \"Sports\", \"Food\", \"Movies\", \"Television\", \"History\", \"Music\", \"Art\", \"Animals\",\n                  \"Science\", \"Politics\", \"Fashion\", \"Books\", \"Travel\", \"Celebrities\", \"Romance\", \"Technology\",\n                  \"Family\", \"School\", \"Nature\", \"Health\", \"Current Events\", \"Work\", \"Give Some Advice\",\n                  \"Definitions\", \"Sayings\", \"Exercise/Fitness\", \"Baby's First Sentence\", \"My Greatest Fear\",\n                  \"In the Year 3000\", \"Weird Laws\", \"I Was Late Because...\", \"Odd College Majors\",\n                  \"My Biggest Secret\", \"New Ice Cream Flavors\", \"Bad Restaurant Names\",\n                  \"I Got Fired Because...\", \"Odd Product Slogans\", \"Bad Habits\", \"Science Fiction\",\n                  \"Strange Trends\", \"Embarrassing Moments\", \"CAVEMAN SAY...\", \"Superhero/villain Names\",\n                  \"Horror Movie Titles\", \"In a Perfect World...\", \"Short Poetry\", \"New Year's Resolutions\",\n                  \"My Dream Last Night\", \"Odd Tombstone Messages\", \"Awful First Dates\", \"Odd Holiday Customs\",\n                  \"The Holidays\", \"Short Ghost Stories\", \"... Said No One Ever\", \"Fairy/Folk Tales\"]\n\nroundsToPlay = 8;\nroundTimes = [9,9,9,9,9,9,9,9] // [50, 60, 60, 80, 50, 60, 60 ,80]\nroundAcroLength = [3, 4, 5, 6, 3, 4, 5, 6]\nvar readyTimerStatus = \"init\"\nvar playTimerStatus = \"init\"\nvar voteTimerStatus = \"init\"\nvar resultsTimerStatus = \"init\"\nvar finalTimerStatus = \"init\"\n\n////////////\n\nMeteor.methods({\n  'games.init'(roomId) {\n    if (Games.find({ room_id: roomId }).fetch().length === 0) { //always make sure updates only happen once\n      readyTimer = {}\n      playTimer = {}\n      playStartTimer = {}\n      voteTimer = {}\n      resultsTimer = {}\n      finalTimer = {}\n      var roundletters;\n      var acroPoolLength = acroLettersPool.length;\n      var catPoolLength = acroCategories.length;\n      var acroPlayArray = [];\n      var acroCatArray = [];\n      for (var i = 0; i < roundsToPlay; i++) {\n        var acroToPlay = \"\";\n        for (var j = 0; j < roundAcroLength[i]; j++) {\n          acroToPlay = acroToPlay + acroLettersPool[Math.floor(Math.random() * acroPoolLength)]\n        }\n        acroPlayArray.push(acroToPlay);\n        acroCatArray.push(acroCategories[Math.floor(Math.random() * catPoolLength)])\n      }\n      Games.insert({\n        room_id: roomId,\n        roundletters: acroPlayArray,\n        roundcategories: acroCatArray,\n        roundtimes: roundTimes\n      });\n      Rooms.update({room_id: roomId}, {\n        $set: { round: 1 , subround: \"Get ready\" },\n      });\n    }\n  },\n\n  'games.getready'(roomId) {\n    if (readyTimerStatus !== \"Ready running\") { // one timer only\n      readyTimerStatus = \"Ready running\"\n      Meteor.setTimeout(function() {\n        if (Gamedata.find({room_id: roomId}).fetch().length === 0) {\n          Meteor.call('games.reset', roomId );\n        } else {\n          Rooms.update({room_id: roomId}, {\n            $set: { subround: \"Play\" },\n          });\n        }\n        readyTimerStatus = \"Ready complete\"\n      }, 3500);\n    }\n  },\n\n  'games.play'(roomId, roundtime) {\n    if (playTimerStatus !== \"Play running\") { // one timer only\n      playTimerStatus = \"Play running\"\n      Games.update({room_id: roomId}, {\n        $set: { turnLetters: true }\n      })\n      var numberOfLetters = roundAcroLength[Rooms.findOne({room_id: roomId}).round - 1]\n      playTimer[roomId] = Meteor.setTimeout(function() {\n        if (Gamedata.find({room_id: roomId}).fetch().length === 0) {\n          Meteor.call('games.reset', roomId );\n        } else {\n          Rooms.update({room_id: roomId}, {\n            $set: { subround: \"Vote\" },\n          });\n        }\n        playTimerStatus = \"Play complete\"\n        Games.update({room_id: roomId}, {\n          $set: { playStartAnswering: false }\n        })\n      }, (roundtime * 1000) + (numberOfLetters * 1000) + 5000);\n      Meteor.setTimeout(function() {\n        Games.update({room_id: roomId}, {\n          $set: { playStartAnswering: true,\n                  timerSeconds: roundtime }\n        })\n        timer(roundtime, roomId, \"playtimerstate\");\n      }, (numberOfLetters * 1000) + 2000)\n\n\n      Meteor.setTimeout(function() {\n        Meteor.call('games.letterFlipFlagOff', roomId);\n      }, (numberOfLetters * 1000) + 600)\n    }\n  },\n\n  'games.vote'(roomId) {\n    if (voteTimerStatus !== \"Vote running\") { // one timer only\n      voteTimerStatus = \"Vote running\"\n      Meteor.setTimeout(function() {\n        if (Gamedata.find({room_id: roomId}).fetch().length === 0) {\n          Meteor.call('games.reset', roomId );\n        } else {\n          Rooms.update({room_id: roomId}, {\n            $set: { subround: \"Results\" },\n          });\n        }\n        voteTimerStatus = \"Vote complete\"\n      }, 4000); //35000\n    }\n  },\n\n  'games.results'(roomId) {\n    if (resultsTimerStatus !== \"Results running\") { // one timer only\n      resultsTimerStatus = \"Results running\"\n      var currentRound = Rooms.findOne({room_id: roomId}).round;\n      if (currentRound === roundsToPlay) {\n        Meteor.setTimeout(function() {\n          if (Gamedata.find({room_id: roomId}).fetch().length < 2) { // end game after results if not enough players\n            resultsTimerStatus = \"Results complete\"\n            Meteor.call('games.reset', roomId );\n          } else {\n            Rooms.update({room_id: roomId}, {\n              $set: { subround: \"Final results\" },\n            });\n          }\n          resultsTimerStatus = \"Results complete\"\n        }, 3000); //22000\n      } else {\n        Meteor.setTimeout(function() {\n          if (Gamedata.find({room_id: roomId}).fetch().length < 2) { // end game after results if not enough players\n            resultsTimerStatus = \"Results complete\"\n            Meteor.call('games.reset', roomId );\n          } else {\n            Rooms.update({room_id: roomId}, {\n              $set: { round: currentRound + 1,\n                      subround: \"Get ready\" },\n            });\n          }\n          resultsTimerStatus = \"Results complete\"\n        }, 3000); //22000\n      }\n    }\n  },\n\n  'games.finalresults'(roomId) {\n    if (finalTimerStatus !== \"Final running\") { // one timer only\n      finalTimerStatus = \"Final running\"\n      Meteor.setTimeout(function() {\n        if (Gamedata.find({room_id: roomId}).fetch().length < 2) { // end game after results if not enough players\n          finalTimerStatus = \"Final complete\"\n          Meteor.call('games.reset', roomId );\n        } else { // set up for new game\n          Games.remove({ room_id: roomId });\n          Meteor.call('games.init', roomId );\n        }\n        finalTimerStatus = \"Final complete\"\n      }, 25000);\n    }\n    readyTimerStatus = \"init\"\n    playTimerStatus = \"init\"\n    voteTimerStatus = \"init\"\n    resultsTimerStatus = \"init\"\n    finalTimerStatus = \"init\"\n  },\n\n  'games.reset'(roomId) {\n    Games.remove({ room_id: roomId });\n    Gamedata.remove({ room_id: roomId });\n    Rooms.update({room_id: roomId}, {\n      $set: { round: 0,\n              subround: \"Waiting for players\" },\n    });\n    readyTimerStatus = \"init\"\n    playTimerStatus = \"init\"\n    voteTimerStatus = \"init\"\n    resultsTimerStatus = \"init\"\n    finalTimerStatus = \"init\"\n  },\n\n  'games.letterFlipFlagOff'(roomId) {\n    Games.update({room_id: roomId}, {\n      $set: { turnLetters: false }\n    })\n  }\n\n})\n\nfunction timer(seconds, roomId, statetoactivate) {\n\n  Meteor.setTimeout(function() {\n    var countdownStartTime = new Date();\n    if (statetoactivate === \"playtimerstate\") {\n      Games.update({room_id: roomId}, {\n        $set: { playStartTime:countdownStartTime,\n                showAnswerForm: true }\n      })\n    } else {\n      Games.update({room_id: roomId}, {\n        $set: { voteStartTime:countdownStartTime }\n      })\n    }\n    var count = seconds;\n    var counter = Meteor.setInterval(tock, 1000);\n\n    function tock() {\n      count=count-1;\n      if (count < 0) {\n         Meteor.clearInterval(counter);\n         Games.update({room_id: roomId}, {\n            $set: { showAnswerForm: false }\n          })\n         return;\n      }\n      Games.update({room_id: roomId}, {\n        $set: { timerSeconds: count }\n      })\n    }\n  }, 2000);\n}\n\n    // Games.find({ room_id: roomId }).remove({});\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { check } from 'meteor/check';\n\nexport const Messages = new Mongo.Collection('messages');\n\nMeteor.methods({\n  'messages.msgPlayer'(roomId, name, verb, roomName, className) {\n    Messages.insert({\n      user_id: \"<PartyHost>\",\n      room_id: roomId,\n      message: name + verb + roomName,\n      messageClass: className,\n      createdAt: new Date()\n    });\n  },\n\n  'messages.postMessage'(name, roomId, message) {\n    Messages.insert({\n      user_id: name,\n      room_id: roomId,\n      message: message,\n      createdAt: new Date() });\n  },\n\n  'messages.deleteOld'(messageId) {\n    Messages.remove({ _id : messageId});\n  }\n\n})\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { check } from 'meteor/check';\n\nexport const Rooms = new Mongo.Collection('rooms');\nimport { Gamedata } from '../api/gamedata.js';\n\nif (Meteor.isServer) {\n  Meteor.publish('rooms', function tasksPublication() {\n    return Rooms.find();\n  });\n}\n\nMeteor.methods({\n  'rooms.addPlayer'(roomId, playerAdding) {\n    if (!Gamedata.findOne({room_id: roomId, user_id: playerAdding})) {\n      Gamedata.insert({\n        room_id: roomId,\n        user_id: playerAdding,\n        score: 0 ,\n      });\n    }\n  },\n\n  'rooms.removePlayer'(roomId, playerRemoving) {\n    Gamedata.remove({room_id: roomId, user_id: playerRemoving});\n  }\n\n})\n","import { Accounts } from 'meteor/accounts-base';\n\nAccounts.onCreateUser((options, user) => {\n\n  user.currentRoom = \"\";\n  user.stats = {\n    lifetimePoints : 0,\n    lifetimeWins : 0,\n    lifetimeGamesPlayed : 0\n  };\n\n  if (options.profile)\n    user.profile = options.profile;\n\n  return user;\n});\n\nMeteor.publish(\"userData\", function () {\n  if (this.userId) {\n    return Meteor.users.find({_id: this.userId},\n                             {fields: {'stats': 1, 'currentRoom': 1}});\n  } else {\n    this.ready();\n  }\n});\n","import { Meteor } from 'meteor/meteor';\nimport '../imports/api/rooms.js';\nimport '../imports/api/chats.js';\nimport '../imports/api/messages.js';\nimport '../imports/api/games.js';\n\nMeteor.startup(() => {\n  // code to run on server at startup\n});\n\n"]}}]